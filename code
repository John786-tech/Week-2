from fastapi import FastAPI
from pydantic import BaseModel
from transformers import pipeline

app = FastAPI(title="Question Answering API")

qa_pipeline = pipeline(
    "question-answering",
    model="distilbert-base-cased-distilled-squad"
)

class QARequest(BaseModel):
    context: str
    question: str

@app.post("/answer")
def get_answer(data: QARequest):
    result = qa_pipeline(
        question=data.question,
        context=data.context
    )
    return {
        "answer": result["answer"],
        "confidence": round(result["score"] * 100, 2),
        "start": result["start"],
        "end": result["end"]
    }
